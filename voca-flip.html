<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üçìVocaFlip: Vocabulary Gameüçì</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* ================= BODY & BACKGROUND ================= */
body {
  margin:0;
  font-family: 'Segoe UI', sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  background: linear-gradient(120deg, #ffe6f0, #e0f7ff, #fffbe6, #f0ffe6);
  background-size: 400% 400%;
  animation: gradientBG 15s ease infinite;
}
@keyframes gradientBG {
  0% {background-position:0% 50%;}
  50% {background-position:100% 50%;}
  100% {background-position:0% 50%;}
}

/* ================= HEADINGS ================= */
h1{
  font-size:4rem;
  font-weight:900;
  color:#c4161c;
  text-align:center;
  margin:0.5rem;
  text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
}
h2{
  font-size:2rem;
  color:#003a8f;
  margin:0.5rem;
}

/* ================= MAIN PANEL ================= */
.main{
  width:100%;
  max-width:1600px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:1rem;
  padding-bottom:2rem;
}

/* ================= RULES ================= */
#rules{
  background:#fff;
  padding:1rem;
  border-radius:10px;
  font-size:1.3rem;
  width:90%;
  max-width:1200px;
  text-align:left;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
}

/* ================= TEAMS ================= */
#teamInputs{
  display:flex;
  flex-wrap:wrap;
  gap:0.5rem;
  justify-content:center;
  margin-bottom:1rem;
}
.team-input{
  font-size:1.5rem;
  padding:0.5rem;
  width:150px;
  text-align:center;
  border-radius:10px;
  border:2px solid #003a8f;
  background:#fff;
}
button{
  font-size:1.3rem;
  padding:0.7rem 1rem;
  border:none;
  border-radius:8px;
  background:#003a8f;
  color:white;
  cursor:pointer;
  margin-top:0.5rem;
  transition: all 0.2s ease;
}
button:hover{background:#c4161c; transform: scale(1.05);}
#teams{
  display:flex;
  gap:1rem;
  margin-top:1rem;
  font-size:1.5rem;
  flex-wrap:wrap;
}
.team{
  padding:0.7rem 1.2rem;
  border-radius:12px;
  background:#f5a623;
  cursor:pointer;
  font-weight:bold;
  transition: all 0.2s ease;
}
.team.current{
  background:#003a8f;
  color:white;
  transform: scale(1.1);
}

/* ================= ENTER WORDS PANEL ================= */
#questionsPanel{
  width:95%;
  max-width:1400px;
  display:flex;
  flex-direction:column;
  gap:0.8rem;
  overflow-y:auto;
  max-height:400px;
}
.question-row{
  display:flex;
  gap:0.5rem;
  width:100%;
}
.question-row input{
  padding:0.5rem;
  font-size:1.3rem;
  border-radius:10px;
  border:2px solid #003a8f;
  flex:1;
}
.question-row input.meaning{
  flex:3;
}

/* ================= CARD GRID ================= */
#cards{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  grid-auto-rows:120px;
  gap:1rem;
  width:90%;
  justify-items:center;
  align-content:start;
  margin-top:1rem;
}
.card{
  width:100%;
  height:100%;
  perspective:1000px;
  cursor:pointer;
  border-radius:12px;
}
.card-inner{
  position:relative;
  width:100%;
  height:100%;
  transition: transform 0.6s;
  transform-style: preserve-3d;
  border-radius:12px;
}
.card.flipped .card-inner{
  transform: rotateY(180deg);
}
.card-front, .card-back{
  position:absolute;
  width:100%;
  height:100%;
  border-radius:12px;
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
  font-weight:bold;
  font-size:1.2rem;
  backface-visibility:hidden;
  padding:0.5rem;
  text-align:center;
}
.card-front { background:#c4161c; }
.card-back { background:#003a8f; transform:rotateY(180deg); }

/* ================= FEEDBACK ================= */
#feedback{
  margin-top:1rem;
  font-size:1.5rem;
  min-height:40px;
  text-align:center;
  font-weight:bold;
  color:#003a8f;
}

/* ================= WINNER ================= */
#winner{
  font-size:3rem;
  font-weight:900;
  color:#ff00aa;
  text-align:center;
  margin:1rem;
}

/* ================= CHOICES BUTTONS ================= */
.choice-btn{
  padding:0.7rem 1.2rem;
  margin:0.2rem;
  font-size:1.5rem;
  border-radius:12px;
  border:none;
  cursor:pointer;
  transition: all 0.2s ease;
}
.choice-btn:hover{
  transform: scale(1.05);
}

/* ================= QUESTION NUMBER BOXES ================= */
.question-number{
  width:60px;
  height:60px;
  display:flex;
  justify-content:center;
  align-items:center;
  border-radius:50%;
  font-weight:bold;
  color:white;
  cursor:pointer;
  font-size:1.2rem;
  transition: transform 0.2s ease;
}
.question-number:hover{transform:scale(1.1);}
</style>
</head>
<body>

<h1>üå∏ VocaFlip üå∏</h1>
<h3 style="font-size:1.5rem; color:#003a8f;">VUS Hoa Binh Campus</h3>

<div class="main">

<!-- Rules -->
<div id="rules">
<strong>Rules:</strong>
<ol>
<li>Select your team by clicking its name above.</li>
<li>Choose a numbered question box to reveal a vocabulary meaning.</li>
<li>Your team discusses and chooses the correct word from 3 options.</li>
<li>The teacher clicks the correct answer to check. ‚úÖ Correct triggers confetti.</li>
<li>Teams take turns. Game ends when all questions are answered.</li>
</ol>
</div>

<!-- Teams -->
<h2>Teams</h2>
<div id="teamInputs">
  <input type="text" value="üçé Team 1" class="team-input" id="team1">
  <input type="text" value="üçì Team 2" class="team-input" id="team2">
  <input type="text" value="üåΩ Team 3" class="team-input" id="team3">
  <button onclick="addTeamInput()">+ Add Team</button>
</div>

<div id="teams"></div>

<!-- Questions Panel -->
<h2>Enter Words and Meanings</h2>
<div id="questionsPanel">
  <div class="question-row">
    <input type="text" placeholder="Word 1" class="word">
    <input type="text" placeholder="Meaning 1" class="meaning">
  </div>
  <div class="question-row">
    <input type="text" placeholder="Word 2" class="word">
    <input type="text" placeholder="Meaning 2" class="meaning">
  </div>
  <div class="question-row">
    <input type="text" placeholder="Word 3" class="word">
    <input type="text" placeholder="Meaning 3" class="meaning">
  </div>
  <button onclick="addQuestionRow()">+ Add Question</button>
</div>

<button onclick="startGame()">Start Game</button>

<div id="cards"></div>
<div id="feedback"></div>
<div id="winner"></div>

</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
let teams = [], scores = [], selectedTeam = null;
let questions = [];

// ================= ADD TEAM INPUT =================
let teamCount = 3;
function addTeamInput(){
  teamCount++;
  if(teamCount>10) return; // max 10
  const div=document.getElementById("teamInputs");
  const input=document.createElement("input");
  input.type="text";
  input.className="team-input";
  input.id="team"+teamCount;
  input.placeholder="üå∏ Team "+teamCount;
  input.style.width="150px";
  div.insertBefore(input, div.querySelector("button"));
}

// ================= ADD QUESTION ROW =================
function addQuestionRow(){
  const panel = document.getElementById("questionsPanel");
  if(panel.querySelectorAll(".question-row").length>=25) return;
  const row=document.createElement("div");
  row.className="question-row";
  const wordInput=document.createElement("input");
  wordInput.type="text";
  wordInput.placeholder="Word "+(panel.querySelectorAll(".question-row").length+1);
  wordInput.className="word";
  const meaningInput=document.createElement("input");
  meaningInput.type="text";
  meaningInput.placeholder="Meaning "+(panel.querySelectorAll(".question-row").length+1);
  meaningInput.className="meaning";
  row.appendChild(wordInput);
  row.appendChild(meaningInput);
  panel.insertBefore(row, panel.querySelector("button"));
}

// ================= START GAME =================
function startGame(){
  const wordEls = document.querySelectorAll(".word");
  const meaningEls = document.querySelectorAll(".meaning");
  questions=[];
  for(let i=0;i<wordEls.length;i++){
    const w = wordEls[i].value.trim();
    const m = meaningEls[i].value.trim();
    if(w && m) questions.push({word:w, meaning:m, revealed:false});
  }
  if(questions.length===0) return alert("Enter at least 1 question.");

  // Shuffle questions
  for(let i=questions.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [questions[i],questions[j]]=[questions[j],questions[i]];
  }

  // Teams
  teams=[];
  for(let i=1;i<=teamCount;i++){
    const t = document.getElementById("team"+i);
    if(t && t.value.trim()!=="") teams.push(t.value.trim());
  }
  if(teams.length===0) return alert("Enter at least 1 team.");
  scores=teams.map(_=>0);
  selectedTeam=null;
  document.getElementById("feedback").textContent="";
  document.getElementById("winner").textContent="";
  renderTeams();
  renderQuestionNumbers();
}

// ================= RENDER TEAMS =================
function renderTeams(){
  const div = document.getElementById("teams");
  div.innerHTML="";
  teams.forEach((t,i)=>{
    const d=document.createElement("div");
    d.className="team" + (i===selectedTeam?" current":"");
    d.textContent=`${t}: ${scores[i]} pts`;
    d.onclick=()=>{selectedTeam=i; renderTeams();}
    div.appendChild(d);
  });
}

// ================= RENDER QUESTION NUMBERS =================
function renderQuestionNumbers(){
  const div=document.getElementById("cards");
  div.innerHTML="";
  questions.forEach((q,i)=>{
    const box=document.createElement("div");
    box.className="question-number";
    box.style.backgroundColor=`hsl(${i*40%360},70%,50%)`;
    box.textContent=i+1;
    box.onclick=()=>{showQuestion(i);};
    div.appendChild(box);
  });
}

// ================= SHOW QUESTION =================
function showQuestion(index){
  const q=questions[index];
  if(q.revealed) return;
  const div=document.getElementById("cards");
  div.innerHTML="";

  // Question display
  const card=document.createElement("div");
  card.className="card";
  card.style.height="200px";

  const inner=document.createElement("div");
  inner.className="card-inner";

  const front=document.createElement("div");
  front.className="card-front";
  front.style.fontSize="1.5rem";
  front.textContent=q.meaning;

  const back=document.createElement("div");
  back.className="card-back";
  back.textContent=q.word;

  inner.appendChild(front);
  inner.appendChild(back);
  card.appendChild(inner);
  div.appendChild(card);

  // Choices
  const choicesDiv=document.createElement("div");
  choicesDiv.style.marginTop="1rem";
  const options=[q.word,"Option 2","Option 3"];
  options.sort(()=>Math.random()-0.5);
  options.forEach(opt=>{
    const btn=document.createElement("button");
    btn.textContent=opt;
    btn.className="choice-btn";
    btn.style.background="#f5a623";
    btn.onclick=()=>{
      if(opt===q.word){
        q.revealed=true;
        inner.classList.add("flipped");
        scores[selectedTeam]+=10;
        document.getElementById("feedback").textContent=`‚úÖ Correct! +10 points`;
        confetti({particleCount:100,spread:70,origin:{y:0.5}});
      } else {
        document.getElementById("feedback").textContent=`‚ùå Wrong! Correct answer: ${q.word}`;
      }
      renderTeams();
      checkWinner();
    };
    choicesDiv.appendChild(btn);
  });
  div.appendChild(choicesDiv);
}

// ================= CHECK WINNER =================
function checkWinner(){
  if(questions.every(q=>q.revealed)){
    const maxScore=Math.max(...scores);
    const winnerIdx=scores.findIndex(s=>s===maxScore);
    const winner=teams[winnerIdx];
    document.getElementById("winner").textContent=`üèÜ Winner: ${winner} üèÜ`;
    // Long confetti
    let duration = 5*1000; // 5 sec for demo, can extend
    let end = Date.now() + duration;
    let interval = setInterval(function(){
      confetti({particleCount:50,spread:100,origin:{y:0.6}});
      if(Date.now()>end) clearInterval(interval);
    },200);
  }
}

// ================= RESTART =================
function restartGame(){window.location.reload();}
</script>

</body>
</html>

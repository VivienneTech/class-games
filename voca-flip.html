<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VocaFlip: Classroom Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  margin:0;
  font-family: system-ui;
  display:flex;
  flex-direction:column;
  align-items:center;
  background:#f5f7fa;
}
h1 {
  color:#c4161c;
  font-size:3rem;
  text-align:center;
  margin:0.5rem;
}
h2 { font-size:2rem; text-align:center; margin:0.5rem; }
.main { width:100%; max-width:1600px; display:flex; flex-direction:column; align-items:center; gap:1rem; }
#rulesPanel {
  background:#fff;
  border-radius:12px;
  padding:1rem 2rem;
  width:90%;
  font-size:1.3rem;
}
#teamSetup {
  display:flex; gap:2rem; width:90%; justify-content:space-between; margin-top:1rem;
}
#teamsArea {
  flex:1;
  display:flex; flex-direction:column; gap:0.5rem;
}
.teamInput {
  font-size:1.2rem; padding:0.5rem; width:150px;
}
.teamBtn {
  font-size:2rem; padding:1rem; cursor:pointer; border:none; border-radius:12px; margin-top:0.5rem;
}
#wordsArea {
  flex:3;
  display:grid;
  grid-template-columns: repeat(5, 1fr);
  gap:0.5rem;
}
.wordBox {
  font-size:1.2rem; padding:1rem; text-align:center; border-radius:8px; border:2px solid #003a8f; background:white; cursor:pointer; min-height:60px;
}
button { font-size:1.3rem; padding:0.8rem 1.2rem; border:none; border-radius:8px; background:#003a8f; color:white; cursor:pointer; margin-top:0.5rem;}
button:hover { background:#c4161c; }
#numberPanel {
  display:flex; flex-wrap:wrap; justify-content:center; gap:0.5rem; margin-top:1rem;
}
.numberBox {
  width:60px; height:60px; display:flex; justify-content:center; align-items:center; background:#c4161c; color:white; font-size:1.5rem; border-radius:12px; cursor:pointer;
}
.numberBox.used { background:#003a8f; cursor:default; }
#questionPanel { display:none; flex-direction:column; align-items:center; gap:1rem; width:80%; margin-top:1rem; }
#meaningBox { font-size:2rem; background:#fff; padding:1.5rem 2rem; border-radius:12px; text-align:center; min-height:80px; width:100%; }
#choices { display:flex; flex-direction:column; gap:1rem; width:100%; }
.choiceBtn {
  font-size:1.5rem; padding:1rem; border:none; border-radius:12px; background:#003a8f; color:white; cursor:pointer; width:100%;
}
.choiceBtn:hover { background:#c4161c; }
#feedback { font-size:1.8rem; min-height:40px; margin-top:1rem; text-align:center; }
#scoreboard { display:flex; gap:1rem; margin-top:1rem; font-size:1.5rem; flex-wrap:wrap; justify-content:center; }
.teamScore { padding:0.5rem 1rem; border-radius:12px; background:#ddd; cursor:pointer; }
.teamScore.current { background:#003a8f; color:white; font-weight:700; }
canvas { position:fixed; top:0; left:0; pointer-events:none; z-index:9999; }
</style>
</head>
<body>

<h1>üå∏ VocaFlip üå∏</h1>
<h2>VUS Hoa Binh Campus</h2>

<div class="main">

<div id="rulesPanel">
<strong>Rules:</strong>
<ol>
<li>Choose your team and emoji on the scoreboard.</li>
<li>Pick a number from the numbered boxes panel to select a question.</li>
<li>The big panel shows the meaning. Think carefully!</li>
<li>Choose the correct word from the 3 answer options.</li>
<li>The teacher clicks your choice to confirm.</li>
<li>‚úÖ Correct ‚Üí +10 points, short confetti. ‚ùå Wrong ‚Üí 0 points, correct word shown briefly.</li>
<li>Next turn rotates to another team. Repeat until all numbers are used.</li>
<li>The team with the highest score wins! üéâ Winner gets long confetti celebration.</li>
</ol>
</div>

<div id="teamSetup">
  <div id="teamsArea">
    <input class="teamInput" placeholder="Team 1" id="team1">
    <input class="teamInput" placeholder="Team 2" id="team2">
    <input class="teamInput" placeholder="Team 3" id="team3">
    <div id="scoreboard"></div>
  </div>
  <div id="wordsArea"></div>
</div>

<button onclick="startGame()">Start Game</button>

<div id="numberPanel"></div>
<div id="questionPanel">
  <div id="meaningBox"></div>
  <div id="choices"></div>
</div>

<div id="feedback"></div>
<button onclick="restartGame()">Restart</button>

<canvas id="confetti"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
let words = []; // {meaning, word}
let numberBoxes = [];
let teams = [];
let scores = [];
let selectedTeam = null;
let currentQuestionIndex = null;

// Example prefilled words (superlative adjectives)
words = [
  {meaning:"Having the greatest height", word:"tallest"},
  {meaning:"Most bright or shining", word:"brightest"},
  {meaning:"Most beautiful", word:"prettiest"},
  {meaning:"Most fast", word:"fastest"},
  {meaning:"Most big", word:"biggest"},
  {meaning:"Most small", word:"smallest"},
  {meaning:"Most strong", word:"strongest"},
  {meaning:"Most smart", word:"smartest"},
  {meaning:"Most long", word:"longest"},
  {meaning:"Most hot", word:"hottest"},
  {meaning:"Most cold", word:"coldest"},
  {meaning:"Most heavy", word:"heaviest"},
  {meaning:"Most light", word:"lightest"},
  {meaning:"Most kind", word:"kindest"},
  {meaning:"Most rich", word:"richest"},
  {meaning:"Most poor", word:"poorest"},
  {meaning:"Most loud", word:"loudest"},
  {meaning:"Most quiet", word:"quietest"},
  {meaning:"Most early", word:"earliest"},
  {meaning:"Most late", word:"latest"},
  {meaning:"Most easy", word:"easiest"},
  {meaning:"Most hard", word:"hardest"},
  {meaning:"Most funny", word:"funniest"},
  {meaning:"Most interesting", word:"most interesting"},
  {meaning:"Most simple", word:"simplest"}
];

const emojis = ["üçé","üçì","üçá","üçâ","üçí","üçç","ü•¶","üåΩ","ü•≠","üå∏"];

function startGame() {
  // Teams
  teams = [
    document.getElementById("team1").value||"Team 1",
    document.getElementById("team2").value||"Team 2",
    document.getElementById("team3").value||"Team 3"
  ].filter(t=>t!=="");
  scores = teams.map(_=>0);
  selectedTeam = null;
  renderTeams();
  renderNumberPanel();
  document.getElementById("feedback").textContent="";
}

function renderTeams() {
  const sb = document.getElementById("scoreboard");
  sb.innerHTML = "";
  teams.forEach((t,i)=>{
    const d = document.createElement("div");
    d.className="teamScore" + (i===selectedTeam?" current":"");
    d.textContent=`${emojis[i%emojis.length]} ${t}: ${scores[i]} pts`;
    d.onclick=()=>{ selectedTeam=i; renderTeams(); }
    sb.appendChild(d);
  });
}

function renderNumberPanel() {
  const np = document.getElementById("numberPanel");
  np.innerHTML="";
  words.forEach((w,i)=>{
    const box = document.createElement("div");
    box.className="numberBox";
    box.textContent=i+1;
    if(w.used) box.classList.add("used");
    box.onclick=()=>{ if(!w.used && selectedTeam!==null) chooseQuestion(i); }
    np.appendChild(box);
  });
}

function chooseQuestion(index) {
  currentQuestionIndex=index;
  const q = words[index];
  q.used=true;
  document.getElementById("numberPanel").style.display="none";
  const qp = document.getElementById("questionPanel");
  qp.style.display="flex";
  document.getElementById("meaningBox").textContent=q.meaning;
  const choicesDiv = document.getElementById("choices");
  choicesDiv.innerHTML="";
  // create 3 choices, 1 correct + 2 random
  const correct = q.word;
  const options = [correct];
  while(options.length<3){
    const r = words[Math.floor(Math.random()*words.length)].word;
    if(!options.includes(r)) options.push(r);
  }
  // shuffle
  options.sort(()=>Math.random()-0.5);
  options.forEach(opt=>{
    const btn = document.createElement("button");
    btn.className="choiceBtn";
    btn.textContent=opt;
    btn.onclick=()=>checkAnswer(opt===correct, btn);
    choicesDiv.appendChild(btn);
  });
}

function checkAnswer(isCorrect, btn) {
  const q = words[currentQuestionIndex];
  if(isCorrect){
    scores[selectedTeam]+=10;
    document.getElementById("feedback").textContent="‚úÖ Correct! +10 points";
    launchConfetti(100); // short confetti
  } else {
    document.getElementById("feedback").textContent=`‚ùå Wrong! Correct answer: ${q.word}`;
  }
  renderTeams();
  // Reset panel after 1.5 sec
  setTimeout(()=>{
    document.getElementById("questionPanel").style.display="none";
    document.getElementById("numberPanel").style.display="flex";
    renderNumberPanel();
    checkEndGame();
  },1500);
}

function checkEndGame() {
  if(words.every(w=>w.used)){
    const maxScore=Math.max(...scores);
    const winners = teams.filter((t,i)=>scores[i]===maxScore);
    document.getElementById("feedback").textContent=`üéâ Winner: ${winners.join(", ")}!`;
    launchConfetti(5000); // long confetti for winner
  }
}

function restartGame(){window.location.reload();}

function launchConfetti(duration=1000){
  const end = Date.now() + duration;
  const canvas = document.getElementById("confetti");
  (function frame(){
    confetti({particleCount:5, spread:60, origin:{y:0.6}, zIndex:9999});
    if(Date.now()<end) requestAnimationFrame(frame);
  }());
}
</script>

</body>
</html>

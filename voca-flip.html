<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VocaFlip: Flashcard Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {margin:0; font-family:system-ui; display:flex; flex-direction:column; align-items:center; background:#f5f7fa;}
h1{color:#c4161c; font-size:3rem; text-align:center; margin:1rem;}
.main{width:100%; max-width:1400px; display:flex; flex-direction:column; align-items:center; gap:1rem;}
#rules{background:#fff; padding:1rem; border-radius:10px; font-size:1.2rem; width:90%;}
textarea{font-size:1.2rem; padding:0.5rem; width:90%; max-width:600px; height:150px;}
input[type="text"]{font-size:1.2rem; padding:0.4rem; width:150px;}
button{font-size:1.3rem; padding:0.7rem 1rem; border:none; border-radius:8px; background:#003a8f; color:white; cursor:pointer; margin-top:0.5rem;}
button:hover{background:#c4161c;}
#teams{display:flex; gap:1rem; margin-top:1rem; font-size:1.3rem; flex-wrap:wrap;}
.team{padding:0.5rem 1rem; border-radius:8px; background:#ddd; cursor:pointer;}
.team.current{background:#003a8f; color:white; font-weight:700;}
#cards{display:grid; grid-template-columns:repeat(5,1fr); grid-template-rows:repeat(5,120px); gap:1rem; width:90%; justify-items:center; align-content:start;}

/* Correct flip effect */
.card { width:100%; height:100%; perspective:1000px; cursor:pointer; }
.card-inner {
  position: relative; width:100%; height:100%;
  text-align:center; transition: transform 0.6s; transform-style: preserve-3d;
  border-radius:12px;
}
.card.flipped .card-inner { transform: rotateY(180deg); }
.card-front, .card-back {
  position: absolute; width:100%; height:100%; backface-visibility: hidden;
  display:flex; justify-content:center; align-items:center;
  font-weight:bold; font-size:1.5rem; border-radius:12px; color:white;
}
.card-front { background:#c4161c; }
.card-back { background:#003a8f; transform: rotateY(180deg); }

#feedback{margin-top:1rem; font-size:1.5rem; min-height:30px; text-align:center;}
</style>
</head>
<body>
<h1>VocaFlip: Flashcard Game</h1>
<div class="main">

<div id="rules">
<strong>Rules:</strong>
<ol>
<li>Select your team first by clicking its name.</li>
<li>Click a card to flip it and reveal the vocabulary word.</li>
<li>Read the meaning on the front before flipping.</li>
<li>Team guesses the word. Correct = +10 points.</li>
<li>Teams take turns selecting cards.</li>
</ol>
</div>

<h2>Enter Words and Meanings (word:meaning)</h2>
<textarea id="wordsInput" placeholder="skyscraper:tall building\nelephant:large animal\npineapple:tropical fruit"></textarea>

<h2>Teams</h2>
<div id="teamInputs">
<input type="text" value="Team 1" id="team1">
<input type="text" value="Team 2" id="team2">
<input type="text" value="Team 3" id="team3">
</div>

<button onclick="startGame()">Start Game</button>
<div id="teams"></div>
<div id="cards"></div>
<div id="feedback"></div>
<button onclick="restartGame()">Restart</button>

</div>

<script>
let cards=[], teams=[], scores=[], selectedTeam=null;

function startGame(){
  const raw = document.getElementById("wordsInput").value.trim().split("\n").map(l=>l.trim()).filter(l=>l!=="");
  if(raw.length===0) return alert("Enter at least one word:meaning");
  cards = raw.map(l=>{
    const parts = l.split(":");
    return {word:parts[0].trim(), meaning:parts[1].trim(), revealed:false};
  }).slice(0,25);

  // Shuffle cards
  for(let i=cards.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [cards[i], cards[j]]=[cards[j],cards[i]];
  }

  teams = [document.getElementById("team1").value||"Team 1",
           document.getElementById("team2").value||"Team 2",
           document.getElementById("team3").value||"Team 3"].filter(t=>t!=="");
  scores = teams.map(_=>0);
  selectedTeam = null;
  renderTeams();
  renderCards();
}

function renderTeams(){
  const div = document.getElementById("teams");
  div.innerHTML="";
  teams.forEach((t,i)=>{
    const d=document.createElement("div");
    d.className = "team" + (i===selectedTeam ? " current" : "");
    d.textContent = `${t}: ${scores[i]} pts`;
    d.onclick=()=>{selectedTeam=i; renderTeams();}
    div.appendChild(d);
  });
}

function renderCards(){
  const div = document.getElementById("cards");
  div.innerHTML="";
  cards.forEach((c,i)=>{
    const card = document.createElement("div");
    card.className="card";

    const inner = document.createElement("div");
    inner.className="card-inner";

    const front = document.createElement("div");
    front.className="card-front";
    front.textContent = c.meaning;

    const back = document.createElement("div");
    back.className="card-back";
    back.textContent = c.word;

    inner.appendChild(front);
    inner.appendChild(back);
    card.appendChild(inner);

    card.onclick=function(){
      if(c.revealed) return;
      if(selectedTeam===null) return alert("Select a team first!");
      c.revealed=true;
      card.classList.add("flipped");
      const answer = prompt(`Team ${teams[selectedTeam]}: Guess the word!`);
      if(answer && answer.trim().toLowerCase()===c.word.toLowerCase()){
        scores[selectedTeam]+=10;
        document.getElementById("feedback").textContent=`✅ Correct! +10 points`;
      } else {
        document.getElementById("feedback").textContent=`❌ Wrong! The word was: ${c.word}`;
      }
      renderTeams();
    }
    div.appendChild(card);
  });
}

function restartGame(){window.location.reload();}
</script>
</body>
</html>

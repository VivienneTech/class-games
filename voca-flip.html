<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ðŸ¦„ VocaFlip ðŸ¦„</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:'Comic Sans MS', cursive, sans-serif;
  background:#fff5fb;
  display:flex;
  flex-direction:column;
  align-items:center;
}

h1{
  margin:10px;
  font-size:3rem;
}

/* ---------- SETUP AREA ---------- */

#teacherPanel{
  background:#fff;
  padding:20px;
  border-radius:24px;
  max-width:1400px;
  width:95%;
  margin-top:10px;
}

#words{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(340px,1fr));
  gap:12px;
}

.wordRow{
  display:flex;
  gap:12px;
  align-items:center;
  background:#fff;
  padding:10px;
  border-radius:18px;
  border:2px solid #f0f0f0;
}

.pasteBox{
  width:90px;
  height:90px;
  border:3px dashed #bbb;
  border-radius:16px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:0.8rem;
  background:white;
  cursor:pointer;
}
.pasteBox img{
  width:100%;
  height:100%;
  object-fit:contain;
  border-radius:12px;
}

.wordRow input{
  font-size:1.2rem;
  padding:8px;
  flex:1;
  border-radius:12px;
  border:1px solid #ccc;
}

/* ---------- CONTROLS ---------- */

#controls{
  background:#fff;
  padding:12px 16px;
  border-radius:20px;
  box-shadow:0 4px 10px rgba(0,0,0,0.08);
  margin:15px;
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  justify-content:center;
}

button, select{
  font-size:1.2rem;
  padding:12px 18px;
  border:none;
  border-radius:16px;
  cursor:pointer;
  font-weight:bold;
}

#addWordBtn{background:#ff9aa2;}
#addTeamBtn{background:#ffb7b2;}
#startBtn{background:#7bdff2;}
#restartBtn{background:#cdb4db;}

/* ---------- TEAMS ---------- */

#teams{
  display:flex;
  gap:12px;
  margin:10px;
  flex-wrap:wrap;
  justify-content:center;
}

.team{
  padding:12px 18px;
  border-radius:18px;
  font-size:1.4rem;
  color:white;
}
.team.current{
  outline:4px solid gold;
}

/* ---------- GAME BOARD ---------- */

#cards{
  display:none;
  grid-template-columns:repeat(5, 1fr);
  gap:24px;
  width:90%;
  max-width:1400px;
  justify-items:center;
  margin-top:20px;
}

.card{
  width:180px;
  height:180px;
  background:#ffe066;
  border-radius:32px;
  font-size:2.2rem;
  font-weight:bold;
  display:flex;
  align-items:flex-start;
  justify-content:flex-start;
  padding:12px;
  cursor:pointer;
}

/* ---------- QUESTION POPUP ---------- */

#popup{
  background:white;
  padding:40px;
  border-radius:36px;
  max-width:620px;
  margin:40px auto;
  display:none;
  text-align:center;
  box-shadow:0 10px 30px rgba(0,0,0,0.25);
}

#popup img{
  width:320px;
  height:320px;
  object-fit:contain;
}

#options{
  display:flex;
  gap:16px;
  justify-content:center;
  margin-top:20px;
  flex-wrap:wrap;
}

.optionBtn{
  font-size:1.8rem;
  padding:20px 28px;
  border:none;
  border-radius:22px;
  background:#ffafcc;
  cursor:pointer;
}

/* ---------- FEEDBACK ---------- */

#celebrate{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  font-size:6rem;
  background:rgba(255,255,255,0.75);
  z-index:999;
  pointer-events:none;
}
</style>
</head>

<body>

<h1>ðŸ¦„ VocaFlip ðŸ¦„</h1>

<div id="teacherPanel">
  <h2>â‘  Add words (paste images)</h2>
  <div id="words"></div>
</div>

<div id="controls">
  <button id="addWordBtn">âž• Add word</button>
  <button id="addTeamBtn">ðŸ‘§ Add team</button>

  <select id="choiceCount">
    <option value="2">2 choices</option>
    <option value="3" selected>3 choices</option>
    <option value="4">4 choices</option>
  </select>

  <button id="startBtn">â–¶ Start</button>
  <button id="restartBtn">ðŸ”„ Restart</button>
</div>

<div id="teams"></div>
<div id="cards"></div>

<div id="popup">
  <img id="popupImg">
  <div id="options"></div>
</div>

<div id="celebrate"></div>

<script>
let words=[], teams=[], scores=[], used=[];
let currentTeam=0, currentIndex=null;

function addWord(){
  if(document.querySelectorAll(".wordRow").length>=30) return;

  const row=document.createElement("div");
  row.className="wordRow";
  row.innerHTML=`
    <div class="pasteBox">Paste<br>Image</div>
    <input placeholder="Correct word">
  `;

  const box=row.querySelector(".pasteBox");
  box.addEventListener("paste",e=>{
    const item=[...e.clipboardData.items].find(i=>i.type.startsWith("image"));
    if(!item) return;
    const url=URL.createObjectURL(item.getAsFile());
    box.innerHTML=`<img src="${url}">`;
    box.dataset.img=url;
  });

  row.querySelector("input").addEventListener("keydown",e=>{
    if(e.key==="Enter") addWord();
  });

  document.getElementById("words").appendChild(row);
}

function addTeam(){
  const name=prompt("Team name?");
  if(!name) return;
  teams.push(name);
  scores.push(0);
  renderTeams();
}

function renderTeams(){
  const div=document.getElementById("teams");
  div.innerHTML="";
  teams.forEach((t,i)=>{
    const d=document.createElement("div");
    d.className="team"+(i===currentTeam?" current":"");
    d.style.background=["#ff6f91","#845ec2","#00c9a7","#ffc75f","#4d96ff"][i%5];
    d.textContent=`${t}: ${scores[i]}`;
    div.appendChild(d);
  });
}

function startGame(){
  words=[];
  document.querySelectorAll(".wordRow").forEach(r=>{
    const img=r.querySelector(".pasteBox").dataset.img;
    const w=r.querySelector("input").value.trim();
    if(img && w) words.push({img,w});
  });
  if(words.length<2) return alert("Add at least 2 words");

  document.getElementById("teacherPanel").style.display="none";
  document.getElementById("cards").style.display="grid";

  renderBoard();
}

function renderBoard(){
  const div=document.getElementById("cards");
  div.innerHTML="";
  used=Array(words.length).fill(false);
  words.forEach((_,i)=>{
    const c=document.createElement("div");
    c.className="card";
    c.textContent=i+1;
    c.onclick=()=>openCard(i);
    div.appendChild(c);
  });
}

function openCard(i){
  if(used[i]) return;
  currentIndex=i;
  document.getElementById("popup").style.display="block";
  document.getElementById("popupImg").src=words[i].img;

  const count=parseInt(document.getElementById("choiceCount").value);
  let opts=[words[i].w];
  while(opts.length<count){
    const r=words[Math.floor(Math.random()*words.length)].w;
    if(!opts.includes(r)) opts.push(r);
  }
  opts.sort(()=>Math.random()-0.5);

  const o=document.getElementById("options");
  o.innerHTML="";
  opts.forEach(x=>{
    const b=document.createElement("button");
    b.className="optionBtn";
    b.textContent=x;
    b.onclick=()=>answer(x);
    o.appendChild(b);
  });
}

function answer(choice){
  const correct=words[currentIndex].w;
  if(choice===correct){
    scores[currentTeam]+=10;
    used[currentIndex]=true;
    celebrate("ðŸ¦„âœ¨");
    currentTeam=(currentTeam+1)%teams.length;
    renderTeams();
    document.getElementById("popup").style.display="none";
  }else{
    celebrate("ðŸ¦„ Try again!");
  }
}

function celebrate(text){
  const c=document.getElementById("celebrate");
  c.textContent=text;
  c.style.display="flex";
  setTimeout(()=>c.style.display="none",900);
}

document.getElementById("addWordBtn").onclick=addWord;
document.getElementById("addTeamBtn").onclick=addTeam;
document.getElementById("startBtn").onclick=startGame;
document.getElementById("restartBtn").onclick=()=>location.reload();

addWord();
</script>

</body>
</html>

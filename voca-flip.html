<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üçì VocaFlip üçì</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  margin:0;
  font-family: system-ui;
  display:flex;
  flex-direction:column;
  align-items:center;
  background:#fdf6e3; /* soft cream background */
}
h1{
  font-size:3rem;
  font-weight:900;
  color:#ff6f61;
  margin:1rem;
  text-align:center;
  text-shadow:2px 2px #fff3e0;
}
.main{
  width:100%;
  max-width:1400px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:1rem;
}
#teacherPanel{
  display:flex;
  gap:2rem;
  width:95%;
  max-width:1400px;
  overflow-x:auto;
  padding:0.5rem;
}
.wordBox{
  display:flex;
  flex-direction:column;
  gap:0.5rem;
  min-width:250px;
}
.wordBox input{
  font-size:1.2rem;
  padding:0.5rem;
  width:100%;
}
#addWordBtn{
  padding:0.7rem 1rem;
  font-size:1.2rem;
  border:none;
  border-radius:12px;
  background:#ffcc00;
  cursor:pointer;
}
#addWordBtn:hover{background:#ffe066;}
#teamsPanel{
  display:flex;
  gap:1rem;
  flex-wrap:wrap;
  margin-top:1rem;
  justify-content:center;
}
.teamInput{
  font-size:1.2rem;
  padding:0.5rem;
  width:150px;
}
.team{
  padding:0.7rem 1rem;
  border-radius:12px;
  background:#6fcf97;
  font-weight:700;
  cursor:pointer;
  transition:0.2s;
}
.team.current{
  background:#81e0aa;
  transform:scale(1.05);
  color:white;
}
#numberPanel{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(80px,1fr));
  gap:1rem;
  width:90%;
  margin-top:1rem;
}
.numberBox{
  padding:1rem;
  border-radius:12px;
  font-weight:700;
  font-size:1.3rem;
  text-align:center;
  cursor:pointer;
  color:white;
  transition:0.2s;
}
#questionPanel{
  display:none;
  flex-direction:column;
  align-items:center;
  gap:1rem;
  margin-top:1rem;
}
#questionPanel button{
  font-size:1.5rem;
  padding:1rem 2rem;
  border:none;
  border-radius:12px;
  cursor:pointer;
  background:#ff6f61;
  color:white;
  transition:0.2s;
}
#questionPanel button:hover{background:#ff8b75;}
#feedback{
  margin-top:1rem;
  font-size:1.5rem;
  min-height:40px;
  text-align:center;
  font-weight:700;
}
</style>
</head>
<body>

<h1>üå∏ VocaFlip: VUS Hoa Binh Campus üåº</h1>

<div class="main">

<!-- Teacher Panel -->
<div id="teacherPanel">
  <div class="wordBox">
    <label>Word 1:</label>
    <input type="text" placeholder="Enter word" class="wordInput">
    <label>Meaning:</label>
    <input type="text" placeholder="Enter meaning" class="meaningInput">
  </div>
  <button id="addWordBtn">+ Add Word</button>
</div>

<!-- Teams -->
<h2>Teams</h2>
<div id="teamsPanel">
  <input type="text" value="üçé Team 1" class="teamInput" id="team1">
  <input type="text" value="üçì Team 2" class="teamInput" id="team2">
  <input type="text" value="üåΩ Team 3" class="teamInput" id="team3">
  <button onclick="addTeamInput()">+ Add Team</button>
</div>

<button onclick="startGame()">Start Game</button>

<!-- Numbered Questions -->
<div id="numberPanel"></div>

<!-- Question Panel -->
<div id="questionPanel"></div>

<div id="feedback"></div>

</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
let questions=[], teams=[], scores=[], selectedTeam=null;
const maxQuestions=25;
let teamCount=3;
const teamEmojis=["üçé","üçì","üåΩ","ü•¶","üçá","üçâ","üçí","üçç","ü•≠","üå∫","üå∏","üåº"];

// ================= ADD WORD BOX =================
document.getElementById("addWordBtn").onclick=function(){
  const panel=document.getElementById("teacherPanel");
  if(panel.querySelectorAll(".wordBox").length>=maxQuestions) return alert("Max 25 questions");
  const box=document.createElement("div");
  box.className="wordBox";
  const n=panel.querySelectorAll(".wordBox").length+1;
  box.innerHTML=`<label>Word ${n}:</label><input type="text" class="wordInput" placeholder="Enter word">
  <label>Meaning:</label><input type="text" class="meaningInput" placeholder="Enter meaning">`;
  panel.insertBefore(box, document.getElementById("addWordBtn"));
}

// ================= ADD TEAM =================
function addTeamInput(){
  teamCount++;
  if(teamCount>25) return;
  const panel=document.getElementById("teamsPanel");
  const input=document.createElement("input");
  input.type="text";
  input.className="teamInput";
  const emoji=teamEmojis[(teamCount-1)%teamEmojis.length];
  input.value=`${emoji} Team ${teamCount}`;
  panel.insertBefore(input, panel.querySelector("button"));
}

// ================= START GAME =================
function startGame(){
  const wordBoxes=document.querySelectorAll(".wordBox");
  questions=[];
  wordBoxes.forEach(box=>{
    const word=box.querySelector(".wordInput").value.trim();
    const meaning=box.querySelector(".meaningInput").value.trim();
    if(word && meaning){
      // Generate 3 choices: word + 2 random others
      let choices=[word];
      const otherWords=wordBoxes.length>1 ? Array.from(wordBoxes).map(b=>b.querySelector(".wordInput").value.trim()).filter(w=>w!==word) : [];
      while(choices.length<3 && otherWords.length>0){
        const r=otherWords[Math.floor(Math.random()*otherWords.length)];
        if(!choices.includes(r)) choices.push(r);
      }
      choices.sort(()=>Math.random()-0.5); // shuffle
      questions.push({word, meaning, choices});
    }
  });
  if(questions.length===0) return alert("Add at least one question");
  
  // Teams
  teams=[];
  scores=[];
  const teamInputs=document.querySelectorAll(".teamInput");
  teamInputs.forEach(input=>{
    if(input.value.trim()) teams.push(input.value.trim());
  });
  scores=teams.map(_=>0);
  selectedTeam=null;
  renderTeams();
  renderNumbers();
  document.getElementById("teacherPanel").style.display="none";
  document.getElementById("teamsPanel").style.display="flex";
}

// ================= RENDER TEAMS =================
function renderTeams(){
  const panel=document.getElementById("teamsPanel");
  panel.querySelectorAll(".teamDisplay")?.forEach(el=>el.remove());
  teams.forEach((t,i)=>{
    const div=document.createElement("div");
    div.className="team teamDisplay"+(i===selectedTeam?" current":"");
    div.textContent=`${t}: ${scores[i]} pts`;
    div.onclick=()=>{selectedTeam=i; renderTeams();}
    panel.appendChild(div);
  });
}

// ================= RENDER NUMBERED QUESTIONS =================
function renderNumbers(){
  const panel=document.getElementById("numberPanel");
  panel.innerHTML="";
  questions.forEach((q,i)=>{
    const div=document.createElement("div");
    div.className="numberBox";
    div.textContent=i+1;
    div.style.background=colorForIndex(i);
    div.onclick=()=>showQuestion(i);
    panel.appendChild(div);
  });
}

// ================= COLOR CYCLE =================
function colorForIndex(i){
  const colors=["#ff6f61","#ffcc00","#6fcf97","#6fbff6","#ff99cc"];
  return colors[i%colors.length];
}

// ================= SHOW QUESTION =================
function showQuestion(index){
  if(selectedTeam===null) return alert("Select your team first!");
  document.getElementById("numberPanel").style.display="none";
  const panel=document.getElementById("questionPanel");
  panel.innerHTML="";
  panel.style.display="flex";

  const q=questions[index];
  const meaningDiv=document.createElement("div");
  meaningDiv.textContent=q.meaning;
  meaningDiv.style.fontSize="2rem";
  meaningDiv.style.fontWeight="700";
  meaningDiv.style.textAlign="center";
  panel.appendChild(meaningDiv);

  q.choices.forEach(choice=>{
    const btn=document.createElement("button");
    btn.textContent=choice;
    btn.onclick=()=>{
      if(choice===q.word){
        scores[selectedTeam]+=10;
        showFeedback("‚úÖ Correct!", true);
      } else {
        showFeedback(`‚ùå Wrong! Correct answer: ${q.word}`, false);
      }
      panel.style.display="none";
      renderTeams();
      document.getElementById("numberPanel").style.display="grid";
    }
    panel.appendChild(btn);
  });
}

// ================= FEEDBACK =================
function showFeedback(text, correct){
  const fb=document.getElementById("feedback");
  fb.textContent=text;
  if(correct){
    confetti({
      particleCount:50,
      spread:70,
      origin:{y:0.6},
      colors:['#ff6f61','#ffcc00','#6fcf97','#6fbff6','#ff99cc']
    });
  }
}
</script>
</body>
</html>

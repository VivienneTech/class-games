<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üå∏ Picture Flip ESL üå∏</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:'Comic Sans MS', cursive;
  background:#fff0f6;
  text-align:center;
}
h1{color:#ff4d6d;font-size:3rem;margin:10px;}
#subtitle{color:#555;margin-bottom:10px;}

button{
  padding:10px 15px;
  font-size:1.1rem;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:bold;
}

#controls button{margin:5px;}
#addTeamBtn{background:#ff9aa2;}
#addCardBtn{background:#fcbf49;}
#startBtn{background:#8ac926;}
#restartBtn{background:#9b5de5;color:white;}

#teacherPanel{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(200px,1fr));
  gap:10px;
  margin:10px;
}

.cardInput{
  background:white;
  border-radius:15px;
  padding:10px;
  box-shadow:0 2px 8px rgba(0,0,0,0.2);
}

.cardInput input[type="file"]{
  font-size:0.9rem;
}
.cardInput input[type="text"]{
  width:90%;
  margin-top:5px;
  padding:5px;
  font-size:1rem;
}

#teams{
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:10px;
  margin:10px;
}
.team{
  padding:10px 15px;
  border-radius:12px;
  font-size:1.2rem;
  font-weight:bold;
  cursor:pointer;
  color:white;
}
.team.current{box-shadow:0 0 10px gold;}

#cards{
  display:grid;
  grid-template-columns:repeat(auto-fill,120px);
  justify-content:center;
  gap:15px;
  margin:20px;
}

.card{
  width:120px;
  height:120px;
  perspective:800px;
  cursor:pointer;
}
.inner{
  width:100%;
  height:100%;
  transition:transform 0.6s;
  transform-style:preserve-3d;
}
.card.flipped .inner{
  transform:rotateY(180deg);
}
.face{
  position:absolute;
  width:100%;
  height:100%;
  border-radius:20px;
  backface-visibility:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:3rem;
}
.front{
  background:#ffcad4;
}
.back{
  background:white;
  transform:rotateY(180deg);
}
.back img{
  width:90%;
  height:90%;
  object-fit:contain;
}

#options{
  margin-top:10px;
}
.optionBtn{
  margin:5px;
  padding:12px 18px;
  font-size:1.2rem;
  border-radius:12px;
  color:white;
}
.correct{background:#38b000;}
.wrong{background:#d00000;}

#feedback{
  font-size:1.5rem;
  margin-top:10px;
  min-height:40px;
}
</style>
</head>

<body>

<h1>üå∏ Picture Flip üå∏</h1>
<div id="subtitle">Kindergarten ESL Speaking Game</div>

<div id="controls">
  <button id="addTeamBtn">Add Team</button>
  <button id="addCardBtn">Add Card</button>
  <button id="startBtn">Start Game</button>
  <button id="restartBtn">Restart</button>
</div>

<h3>üë©‚Äçüè´ Teacher Panel</h3>
<div id="teacherPanel"></div>

<div id="teams"></div>
<div id="cards"></div>
<div id="options"></div>
<div id="feedback"></div>

<script>
let teams=[], scores=[], selectedTeam=null;
let cardsData=[], currentCard=null;

const teamColors=["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93"];

// START WITH 3 CARDS
for(let i=0;i<3;i++) addCardInput();

document.getElementById("addTeamBtn").onclick=()=>{
  const name=prompt("Team name:");
  if(!name) return;
  teams.push(name);
  scores.push(0);
  renderTeams();
};

document.getElementById("addCardBtn").onclick=addCardInput;

document.getElementById("startBtn").onclick=()=>{
  cardsData=[];
  document.querySelectorAll(".cardInput").forEach(box=>{
    const file=box.querySelector("input[type=file]").files[0];
    const word=box.querySelector("input[type=text]").value.trim();
    if(file && word){
      const reader=new FileReader();
      reader.onload=()=> {
        cardsData.push({img:reader.result, word, used:false});
        if(cardsData.length===document.querySelectorAll(".cardInput").length){
          renderCards();
        }
      };
      reader.readAsDataURL(file);
    }
  });
};

document.getElementById("restartBtn").onclick=()=>location.reload();

function addCardInput(){
  const div=document.createElement("div");
  div.className="cardInput";
  div.innerHTML=`
    <p>üñº Picture</p>
    <input type="file" accept="image/*">
    <input type="text" placeholder="Word (teacher only)">
  `;
  document.getElementById("teacherPanel").appendChild(div);
}

function renderTeams(){
  const div=document.getElementById("teams");
  div.innerHTML="";
  teams.forEach((t,i)=>{
    const d=document.createElement("div");
    d.className="team"+(i===selectedTeam?" current":"");
    d.style.background=teamColors[i%teamColors.length];
    d.textContent=`${t}: ${scores[i]} pts`;
    d.onclick=()=>{selectedTeam=i;renderTeams();};
    div.appendChild(d);
  });
}

function renderCards(){
  const div=document.getElementById("cards");
  div.innerHTML="";
  cardsData.forEach(c=>{
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`
      <div class="inner">
        <div class="face front">‚ùì</div>
        <div class="face back"><img src="${c.img}"></div>
      </div>
    `;
    card.onclick=()=>{
      if(c.used) return;
      if(selectedTeam===null) return alert("Select a team!");
      card.classList.add("flipped");
      currentCard=c;
      showTeacherButtons();
    };
    div.appendChild(card);
  });
}

function showTeacherButtons(){
  document.getElementById("options").innerHTML=`
    <button class="optionBtn correct" onclick="markCorrect()">‚úÖ Correct</button>
    <button class="optionBtn wrong" onclick="markWrong()">‚ùå Show Word</button>
  `;
}

function markCorrect(){
  scores[selectedTeam]+=10;
  currentCard.used=true;
  document.getElementById("feedback").textContent="üéâ Great job!";
  renderTeams();
  clearOptions();
}

function markWrong(){
  currentCard.used=true;
  document.getElementById("feedback").textContent="üì¢ Word: "+currentCard.word;
  clearOptions();
}

function clearOptions(){
  setTimeout(()=>{
    document.getElementById("options").innerHTML="";
  },1200);
}
</script>

</body>
</html>

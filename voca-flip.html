<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üå∑ VocaFlip üå∑</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  margin:0;
  font-family: 'Comic Sans MS', cursive, sans-serif;
  background:#ffe4e1;
  display:flex;
  flex-direction:column;
  align-items:center;
}
h1 {
  font-size:3rem;
  font-weight:bold;
  color:#ff4d94;
  margin:0.5rem;
  text-align:center;
}
h2 {
  font-size:1.6rem;
  color:#ff85a2;
  margin:0.5rem;
}
#subtitle {
  font-size:1.2rem;
  color:#ff99c8;
  margin-bottom:1rem;
}
.main {
  width:100%;
  max-width:1400px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:1rem;
}
#teacherPanel {
  display:flex;
  flex-wrap:wrap;
  gap:0.8rem;
  max-height:400px;
  overflow-y:auto;
  width:90%;
  background:#fff0f5;
  padding:1rem;
  border-radius:12px;
}
.questionRow {
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:0.3rem;
  flex:1 1 calc(20% - 0.8rem); /* 5 per row */
  min-width:200px;
}
.questionRow input {
  font-size:1rem;
  padding:0.5rem;
  border-radius:8px;
  border:1px solid #ffb6c1;
  width:100%;
}
button {
  font-size:1.3rem;
  padding:0.7rem 1rem;
  border:none;
  border-radius:12px;
  cursor:pointer;
  margin:0.3rem;
  font-weight:bold;
}
button:hover {
  transform: scale(1.05);
  transition: 0.2s;
}
#startGameBtn { background:#ff6f61; color:white; }
#addTeamBtn { background:#6feaff; color:#003a8f; }
#restartBtn { background:#ffcc00; color:#003a8f; }

#teams {
  display:flex;
  flex-wrap:wrap;
  gap:1rem;
  margin-top:1rem;
}
.team {
  padding:0.5rem 1rem;
  border-radius:12px;
  cursor:pointer;
  font-size:1.3rem;
  font-weight:bold;
  color:white;
  display:flex;
  align-items:center;
  gap:0.5rem;
}
.team.current { border:3px solid #fff; box-shadow:0px 0px 10px #ff99c8; }

#questionBoxes {
  display:flex;
  flex-wrap:wrap;
  gap:1rem;
  justify-content:center;
  margin-top:1rem;
  width:90%;
}
.qBox {
  background:#ffb6c1;
  color:white;
  font-weight:bold;
  font-size:1.5rem;
  border-radius:12px;
  width:80px;
  height:80px;
  display:flex;
  justify-content:center;
  align-items:center;
  cursor:pointer;
  transition:0.3s;
}
.qBox.selected { background:#90ee90; }

#questionPanel {
  display:none;
  flex-direction:column;
  align-items:center;
  gap:1rem;
  margin-top:1rem;
  width:80%;
  background:#fff0f5;
  padding:1rem;
  border-radius:12px;
}
.answerBtn {
  font-size:1.5rem;
  padding:1rem;
  width:80%;
  border-radius:12px;
  cursor:pointer;
  border:none;
  font-weight:bold;
  transition:0.2s;
  background:#ff85a2;
  color:white;
}
.answerBtn:hover { transform: scale(1.05); }
#feedback { font-size:1.6rem; margin-top:1rem; min-height:30px; }

</style>
</head>
<body>

<h1>üå∑ VocaFlip üå∑</h1>
<div id="subtitle">VUS Hoa Binh Campus</div>

<div class="main">

<h2>Teacher Panel: Add Questions</h2>
<div id="teacherPanel">
  <!-- Question boxes will appear here -->
</div>
<div style="display:flex; gap:0.5rem; flex-wrap:wrap; justify-content:center;">
  <button id="addQuestionBtn">+ Add Question</button>
  <button id="startGameBtn">Start Game</button>
  <button id="addTeamBtn">+ Add Team</button>
  <button id="restartBtn">Restart</button>
</div>

<h2>Teams</h2>
<div id="teams"></div>

<div id="questionBoxes"></div>

<div id="questionPanel">
  <div id="questionText" style="font-size:2rem; text-align:center;"></div>
  <div id="answerChoices" style="display:flex; flex-direction:column; gap:1rem;"></div>
</div>

<div id="feedback"></div>
</div>

<script>
// GLOBAL VARIABLES
let teacherQuestions = [];
let teams = [];
let scores = [];
let selectedTeam = null;
let emojis = ["üçé","üçì","üåΩ","ü•¶","üçâ","üçç","üçá","ü•≠","üåª","ü•ù"];
let questionIndex = null;

// CREATE INITIAL QUESTIONS
function createQuestionBox(number){
  const div = document.createElement('div');
  div.className = 'questionRow';
  const wordInput = document.createElement('input');
  wordInput.placeholder = `Word ${number}`;
  const meaningInput = document.createElement('input');
  meaningInput.placeholder = `Meaning ${number}`;
  div.appendChild(wordInput);
  div.appendChild(meaningInput);
  teacherQuestions.push({div, wordInput, meaningInput});
  document.getElementById('teacherPanel').appendChild(div);
}

// INITIAL 3 QUESTIONS
for(let i=1;i<=3;i++) createQuestionBox(i);

// ADD QUESTION
document.getElementById('addQuestionBtn').onclick = ()=>{
  if(teacherQuestions.length>=25) return alert("Max 25 questions");
  createQuestionBox(teacherQuestions.length+1);
}

// ADD TEAM
document.getElementById('addTeamBtn').onclick = ()=>{
  if(teams.length>=10) return alert("Max 10 teams");
  const name = `Team ${teams.length+1}`;
  const emoji = emojis[teams.length % emojis.length];
  teams.push({name, emoji});
  scores.push(0);
  renderTeams();
}

// RENDER TEAMS
function renderTeams(){
  const div = document.getElementById('teams');
  div.innerHTML="";
  teams.forEach((t,i)=>{
    const d = document.createElement('div');
    d.className = 'team'+(i===selectedTeam?" current":"");
    d.textContent = `${t.emoji} ${t.name}: ${scores[i]} pts`;
    d.onclick=()=>{ selectedTeam=i; renderTeams(); };
    div.appendChild(d);
  });
}

// START GAME
document.getElementById('startGameBtn').onclick = ()=>{
  // Filter out empty questions
  teacherQuestions = teacherQuestions.filter(q=>q.wordInput.value.trim()!=="" && q.meaningInput.value.trim()!=="");
  if(teacherQuestions.length===0) return alert("Add at least one question!");
  renderQuestionBoxes();
  // Disable inputs
  teacherQuestions.forEach(q=>{q.wordInput.disabled=true; q.meaningInput.disabled=true;});
  document.getElementById('feedback').textContent = 'Game Started! Choose a team and a question.';
}

// RENDER NUMBERED QUESTION BOXES
function renderQuestionBoxes(){
  const div = document.getElementById('questionBoxes');
  div.innerHTML="";
  teacherQuestions.forEach((q,i)=>{
    const box = document.createElement('div');
    box.className='qBox';
    box.textContent=i+1;
    box.onclick = ()=>{
      document.querySelectorAll('.qBox').forEach(b=>b.classList.remove('selected'));
      box.classList.add('selected');
      showQuestion(i);
    }
    div.appendChild(box);
  });
}

// SHOW QUESTION AND ANSWER CHOICES
function showQuestion(i){
  questionIndex = i;
  const q = teacherQuestions[i];
  const panel = document.getElementById('questionPanel');
  panel.style.display='flex';
  document.getElementById('questionText').textContent = q.meaningInput.value;

  // Generate 3 choices (correct + 2 random)
  const choices = [q.wordInput.value];
  while(choices.length<3){
    const r = teacherQuestions[Math.floor(Math.random()*teacherQuestions.length)].wordInput.value;
    if(!choices.includes(r)) choices.push(r);
  }
  // Shuffle
  choices.sort(()=>Math.random()-0.5);

  const answerDiv = document.getElementById('answerChoices');
  answerDiv.innerHTML="";
  choices.forEach(c=>{
    const btn = document.createElement('button');
    btn.className='answerBtn';
    btn.textContent=c;
    btn.onclick=()=>{checkAnswer(c);};
    answerDiv.appendChild(btn);
  });
}

// CHECK ANSWER
function checkAnswer(ans){
  const correct = teacherQuestions[questionIndex].wordInput.value;
  if(ans===correct){
    document.getElementById('feedback').textContent='‚úÖ Correct!';
    scores[selectedTeam]+=10;
  } else {
    document.getElementById('feedback').textContent=`‚ùå Wrong! Answer: ${correct}`;
  }
  renderTeams();
  // small confetti
  launchConfetti(1);
}

// RESTART
document.getElementById('restartBtn').onclick = ()=>{ location.reload(); }

// SIMPLE CONFETTI FUNCTION
function launchConfetti(seconds){
  // for simplicity, just flashes background color
  const body = document.body;
  const orig = body.style.background;
  body.style.background='#ffff66';
  setTimeout(()=>{body.style.background=orig;}, seconds*1000);
}
</script>
</body>
</html>



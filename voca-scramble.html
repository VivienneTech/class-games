<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VocaScramble: Interactive Team Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  margin:0; 
  font-family: system-ui; 
  background: #f5f7fa; 
  display: flex; 
  flex-direction: column; 
  align-items: center; 
  justify-content: flex-start; 
  min-height: 100vh;
}
h1 {color:#c4161c; font-size:3rem; margin:1rem; text-align:center;}
.main {width:100%; max-width:1400px; display:flex; flex-direction:column; align-items:center; gap:1rem; flex:1;}
#rules {
  background:#fff; padding:1rem; border-radius:10px; 
  font-size:1.2rem; width:90%; text-align:left;
}
textarea {font-size:1.2rem; padding:0.5rem; width:100%; max-width:600px; height:150px;}
input[type="text"] {font-size:1.2rem; padding:0.4rem; width:150px;}
button {font-size:1.3rem; padding:0.7rem 1rem; border:none; border-radius:8px; background:#003a8f; color:white; cursor:pointer; margin-top:0.5rem;}
button:hover {background:#c4161c;}
#teams {display:flex; gap:1rem; margin-top:1rem; font-size:1.3rem; flex-wrap:wrap;}
.team {padding:0.5rem 1rem; border-radius:8px; background:#ddd; cursor:pointer;}
.team.current {background:#003a8f; color:white; font-weight:700;}
#cards {
  display: grid;
  grid-template-columns: repeat(5, 1fr); 
  grid-template-rows: repeat(5, 120px);
  gap: 1rem;
  width: 90%;
  justify-items: center;
  align-content: start;
}
.card {
  width:100%; height:100%; 
  background:#c4161c; color:white; 
  display:flex; align-items:center; justify-content:center; 
  font-weight:bold; cursor:pointer; border-radius:12px; 
  font-size:1.5rem; user-select:none;
}
.card.revealed {background:#003a8f;}
#feedback {margin-top:1rem; font-size:1.5rem; min-height:30px; text-align:center;}
</style>
</head>
<body>

<h1>VocaScramble: Interactive Team Game</h1>

<div class="main">

<div id="rules">
<strong>Rules:</strong>
<ol>
<li>All scrambled words are visible on the screen.</li>
<li>A student from a team comes to the screen and clicks their team name to select it.</li>
<li>Then, they click a card to reveal the correct word.</li>
<li>The selected team guesses the word. Correct = +10 points.</li>
<li>If wrong, no points are awarded.</li>
<li>Teams take turns selecting cards until all cards are answered.</li>
</ol>
</div>

<h2>Enter Scrambled Words</h2>
<textarea id="scrambledInput" placeholder="akcraor\npomel\nkaola"></textarea>

<h2>Enter Correct Words (matching order)</h2>
<textarea id="correctInput" placeholder="carrot\napple\nkoala"></textarea>

<h2>Teams</h2>
<div id="teamInputs">
<input type="text" value="Team 1" id="team1">
<input type="text" value="Team 2" id="team2">
<input type="text" value="Team 3" id="team3">
</div>

<button onclick="startGame()">Start Game</button>

<div id="teams"></div>
<div id="cards"></div>
<div id="feedback"></div>
<button onclick="restartGame()">Restart</button>

</div>

<script>
let scrambled=[], correct=[], teams=[], scores=[], selectedTeam=null;

function startGame(){
  scrambled = document.getElementById("scrambledInput").value.trim().split("\n").map(w=>w.trim()).filter(w=>w!=="").slice(0,25);
  correct = document.getElementById("correctInput").value.trim().split("\n").map(w=>w.trim()).filter(w=>w!=="").slice(0,25);
  if(scrambled.length!==correct.length || scrambled.length===0) return alert("Scrambled words and correct words must match and not be empty (max 25).");

  // Shuffle words + answers together
  let combined = scrambled.map((w,i)=>({word:w, answer:correct[i]}));
  for(let i = combined.length-1; i>0; i--){
    const j = Math.floor(Math.random() * (i+1));
    [combined[i], combined[j]] = [combined[j], combined[i]];
  }
  scrambled = combined.map(c=>c.word);
  correct = combined.map(c=>c.answer);

  teams = [document.getElementById("team1").value||"Team 1",
           document.getElementById("team2").value||"Team 2",
           document.getElementById("team3").value||"Team 3"].filter(t=>t!=="");
  scores = teams.map(_=>0);
  selectedTeam = null;
  renderTeams();
  renderCards();
}

function renderTeams(){
  const div = document.getElementById("teams");
  div.innerHTML = "";
  teams.forEach((t,i)=>{
    const d = document.createElement("div");
    d.className = "team" + (i===selectedTeam ? " current" : "");
    d.textContent = `${t}: ${scores[i]} pts`;
    d.onclick = () => { selectedTeam = i; renderTeams(); }
    div.appendChild(d);
  });
}

function renderCards(){
  const div = document.getElementById("cards");
  div.innerHTML = "";
  scrambled.forEach((s,i)=>{
    const card = document.createElement("div");
    card.className = "card";
    card.textContent = s;
    card.onclick = function(){
      if(card.classList.contains("revealed")) return;
      if(selectedTeam === null) return alert("Select a team first!");
      card.classList.add("revealed");
      card.textContent = correct[i];
      const answer = prompt(`Team ${teams[selectedTeam]}: Guess the word!`);
      if(answer && answer.trim().toLowerCase() === correct[i].toLowerCase()){
        scores[selectedTeam] += 10;
        document.getElementById("feedback").textContent = `✅ Correct! +10 points`;
      } else {
        document.getElementById("feedback").textContent = `❌ Wrong! The word was: ${correct[i]}`;
      }
      renderTeams();
    }
    div.appendChild(card);
  });
}

function restartGame(){window.location.reload();}
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VocaScramble üå∏ Kids Edition</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  font-family: "Comic Sans MS", system-ui;
  background: linear-gradient(#fff7e6,#ffe0b2);
  text-align:center;
}
h1{color:#e53935;font-size:3rem;margin:0.5rem;}
h3{color:#fb8c00;margin-top:0px;}
.main{max-width:1400px;margin:auto;padding:1rem;}
#rules{
  background:#fff3e0;
  padding:1rem;
  border-radius:15px;
  box-shadow:0 4px 6px rgba(0,0,0,0.1);
  font-size:1.2rem;
  margin-bottom:1rem;
  text-align:left;
}
button{font-size:1.2rem;padding:0.5rem 1rem;margin:0.3rem;border:none;border-radius:12px;cursor:pointer;background:#43a047;color:white;}
button:hover{background:#2e7d32;}
#scoreboard{
  display:flex;
  justify-content:center;
  gap:1rem;
  flex-wrap:wrap;
  font-size:1.8rem;
  margin:1rem 0;
}
.team{padding:0.6rem 1rem;border-radius:15px;background:#fff;border:3px solid #ffb74d;cursor:pointer;font-size:1.3rem;}
.team.current{background:#ff7043;color:white;font-weight:bold;}
#cards{display:grid;grid-template-columns:repeat(5,1fr);gap:1rem;width:90%;margin:auto;}
.card{background:#ef5350;color:white;font-size:1.5rem;font-weight:bold;border-radius:15px;height:110px;display:flex;align-items:center;justify-content:center;cursor:pointer;}
.card.revealed{background:#42a5f5;}
#choices{margin-top:1rem;font-size:1.3rem;}
.choice{background:#ffd54f;color:#000;font-size:1.3rem;margin:0.3rem;}
.choice:hover{background:#ffb300;}
#feedback{font-size:1.8rem;margin:1rem;min-height:40px;}
#winnerScreen{display:none;font-size:3rem;color:#2e7d32;margin-top:1rem;}
canvas{position:fixed;top:0;left:0;pointer-events:none;z-index:9999;}
input{border-radius:8px;border:2px solid #ccc;}
.flex-container{display:flex; gap:1rem; width:100%; flex-wrap:wrap;}
#teamSection{flex:1; min-width:200px; max-height:800px; overflow-y:auto; background:#fff3e0; padding:1rem; border-radius:15px; box-shadow:0 4px 6px rgba(0,0,0,0.1);}
#wordsSection{flex:3; min-width:500px; max-height:800px; overflow-y:auto; background:#fff3e0; padding:1rem; border-radius:15px; box-shadow:0 4px 6px rgba(0,0,0,0.1);}
#wordsInputBoxes{display:flex; flex-direction:column; gap:5px;}
#wordsInputBoxes input{font-size:1.3rem; padding:0.5rem; width:100%; box-sizing:border-box;}
#teamSetup select, #teamSetup input{font-size:1.3rem; padding:0.5rem; width:90%; margin-bottom:0.3rem;}
</style>
</head>
<body>
<h1>üå∏ VocaScramble üå∏</h1>
<h3>VUS Hoa Binh Campus</h3>

<div id="rules">
<strong>Rules:</strong>
<ol>
<li>Select a team from the scoreboard.</li>
<li>Choose a word card (students can use sticky balls or pointers).</li>
<li>Choose the correct answer from the options that appear.</li>
<li>Correct = +10 points, Wrong = 0 points.</li>
<li>Teams take turns until all cards are answered.</li>
<li>The team with the highest score wins!</li>
</ol>
</div>

<div class="main">
  <div class="flex-container">
    <!-- TEAMS SECTION -->
    <div id="teamSection">
      <h2>Teams üçé</h2>
      <div id="teamSetup"></div>
      <button onclick="addTeam()">‚ûï Add Team</button>
    </div>

    <!-- ENTER WORDS SECTION -->
    <div id="wordsSection">
      <h2>Enter Words (1 per box, max 25)</h2>
      <div id="wordsInputBoxes"></div>
      <button onclick="addWordBox()">‚ûï Add Word</button>
    </div>
  </div>
  <br>
  <button onclick="startGame()">‚ñ∂ Start Game</button>

  <div id="scoreboard"></div>
  <div id="cards"></div>
  <div id="choices"></div>
  <div id="feedback"></div>
  <div id="winnerScreen"></div>
</div>

<canvas id="confetti"></canvas>

<!-- üîä Sounds -->
<audio id="correctSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="wrongSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<audio id="winSound" src="https://actions.google.com/sounds/v1/cartoon/ta_da.ogg"></audio>

<script>
let correct=[], scrambled=[];
let teams=[], scores=[], selectedTeam=null;
let currentAnswerIndex=null;
let currentCard=null;

const fruitsVeggies=["üçé","üçì","üçá","üçâ","üçí","üçç","ü•ù","üåΩ","ü•¶","ü•≠"];

// ---------------- TEAM SETUP ----------------
function addTeam(){
  const div=document.createElement("div");
  div.className="teamRow";
  div.innerHTML=`
    <select>${fruitsVeggies.map(e=>`<option>${e}</option>`).join("")}</select>
    <input placeholder="Team name">
  `;
  document.getElementById("teamSetup").appendChild(div);
}
addTeam(); addTeam();

// ---------------- WORD BOX SETUP ----------------
function addWordBox(value=""){
  const div=document.getElementById("wordsInputBoxes");
  const index=div.children.length/2 + 1; // numbering
  const input=document.createElement("input");
  input.type="text";
  input.placeholder=`Word ${index}`;
  input.value=value;
  input.addEventListener('input',()=>{input.value=input.value.toLowerCase()});
  div.appendChild(input);
  div.appendChild(document.createElement("br"));
}
// add 3 example words
addWordBox("biggest"); addWordBox("fastest"); addWordBox("happiest");

// ---------------- GAME LOGIC ----------------
function shuffleWord(word){return word.split('').sort(()=>Math.random()-0.5).join('');}
function startGame(){
  correct=Array.from(document.querySelectorAll("#wordsInputBoxes input"))
          .map(i=>i.value.trim())
          .filter(w=>w!=="")
          .slice(0,25);
  if(correct.length===0) return alert("Add at least 1 word!");
  scrambled=correct.map(w=>shuffleWord(w));

  teams=[]; scores=[];
  document.querySelectorAll(".teamRow").forEach(r=>{
    const emoji=r.children[0].value;
    const name=r.children[1].value||"Team";
    teams.push(`${emoji} ${name}`);
    scores.push(0);
  });
  selectedTeam=null;
  renderScoreboard();
  renderCards();
  document.getElementById("feedback").textContent="";
  document.getElementById("winnerScreen").style.display="none";
}

// ---------------- SCOREBOARD ----------------
function renderScoreboard(){
  const div=document.getElementById("scoreboard");
  div.innerHTML="";
  teams.forEach((t,i)=>{
    const d=document.createElement("div");
    d.className="team"+(i===selectedTeam?" current":"");
    d.textContent=`${t}: ${scores[i]}`;
    d.style.fontSize="1.5rem";
    d.style.padding="0.8rem 1.2rem"; // bigger for side-by-side
    d.onclick=()=>{selectedTeam=i;renderScoreboard();}
    div.appendChild(d);
  });
}

// ---------------- CARDS ----------------
function renderCards(){
  const div=document.getElementById("cards");
  div.innerHTML="";
  scrambled.forEach((s,i)=>{
    const c=document.createElement("div");
    c.className="card";
    c.textContent=s;
    c.onclick=()=>revealCard(c,i);
    div.appendChild(c);
  });
}

// ---------------- CHOICES ----------------
function revealCard(card,i){
  if(card.classList.contains("revealed")) return;
  if(selectedTeam===null) return alert("Select a team!");
  currentAnswerIndex=i;
  currentCard=card;
  showChoices();
}

function showChoices(){
  const div=document.getElementById("choices");
  div.innerHTML="<h2>Choose the correct answer</h2>";
  let options=[correct[currentAnswerIndex]];
  while(options.length<3){
    const r=correct[Math.floor(Math.random()*correct.length)];
    if(!options.includes(r)) options.push(r);
  }
  options.sort(()=>Math.random()-0.5);
  options.forEach((o,idx)=>{
    const b=document.createElement("button");
    b.className="choice";
    b.textContent=`${idx+1}. ${o}`;
    b.onclick=()=>checkAnswer(o);
    div.appendChild(b);
  });
}

function checkAnswer(choice){
  const div=document.getElementById("choices");
  div.innerHTML="";
  currentCard.classList.add("revealed");
  currentCard.textContent=correct[currentAnswerIndex];

  if(choice.includes(correct[currentAnswerIndex])){
    scores[selectedTeam]+=10;
    document.getElementById("correctSound").play();
    document.getElementById("feedback").textContent="‚úÖ Correct! +10";
    launchConfetti();
  }else{
    document.getElementById("wrongSound").play();
    document.getElementById("feedback").textContent=`‚ùå Wrong! Answer was "${correct[currentAnswerIndex]}"`;
  }
  renderScoreboard();
  checkWin();
}

function checkWin(){
  const allRevealed=[...document.querySelectorAll(".card")].every(c=>c.classList.contains("revealed"));
  if(allRevealed){
    const max=Math.max(...scores);
    const winner=teams[scores.indexOf(max)];
    document.getElementById("winSound").play();
    document.getElementById("winnerScreen").style.display="block";
    document.getElementById("winnerScreen").textContent=`üèÜ WINNER: ${winner} üèÜ`;
    launchConfetti();
  }
}

// ---------------- CONFETTI ----------------
const confettiCanvas=document.getElementById("confetti");
const ctx=confettiCanvas.getContext("2d");
let confettiParticles=[];
function resizeCanvas(){confettiCanvas.width=window.innerWidth; confettiCanvas.height=window.innerHeight;}
window.addEventListener("resize",resizeCanvas);
resizeCanvas();
function launchConfetti(){
  for(let i=0;i<100;i++){
    confettiParticles.push({
      x: Math.random()*confettiCanvas.width,
      y: Math.random()*confettiCanvas.height- confettiCanvas.height,
      r: Math.random()*6+4,
      d: Math.random()*10+5,
      color:`hsl(${Math.random()*360}, 100%, 50%)`,
      tilt: Math.random()*10-10,
      tiltAngleIncrement: Math.random()*0.07+0.05
    });
  }
}
function drawConfetti(){
  ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
  confettiParticles.forEach(p=>{
    ctx.beginPath();
    ctx.lineWidth=p.r/2;
    ctx.strokeStyle=p.color;
    ctx.moveTo(p.x+p.tilt+p.r/4, p.y);
    ctx.lineTo(p.x+p.tilt, p.y+p.tilt+p.r/2);
    ctx.stroke();
    p.tiltAngle+=p.tiltAngleIncrement;
    p.y += (Math.cos(p.d)+1+ p.r/2)/2;
    p.x += Math.sin(p.tiltAngle)*2;
    if(p.y>confettiCanvas.height) p.y=-10;
  });
  requestAnimationFrame(drawConfetti);
}
drawConfetti();
</script>
</body>
</html>
